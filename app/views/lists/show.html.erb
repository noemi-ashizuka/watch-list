<% if @list.photo.attached? %>
  <div class="page-header-banner" style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), url('<%= cl_image_path @list.photo.key, height: 400, width: 800, crop: :fill %>')">
    <div class="page-header-banner-content" >
      <h1><%= @list.name %></h1>
    </div>
  </div>
<% else %>
    <div class="page-header-banner" style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), url('https://images.unsplash.com/photo-1542204165-65bf26472b9b?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1334&q=80')">
    <div class="page-header-banner-content" >
      <h1><%= @list.name %></h1>
    </div>
  </div>
<% end %>

<div class="container">
  <div class="page-header">
    <button type="button" class="btn btn-blue" data-toggle="modal" data-target="#bookmark-modal-form">
        Bookmark a movie
    </button>
  </div>
</div> <!-- container -->

  <div class="modal fade" id="bookmark-modal-form" tabindex="-1" aria-labelledby="bookmarkModalFormLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Add a Movie to <%= @list.name %> list</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
          <%= render 'bookmarks/modal' %>     
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-12 col-sm-12 col-md-9">
      <div class="movies-list">
        <% @movies_list.each do |bookmark| %>
          <div class="movie-card">
            <img src="<%= bookmark.movie.poster_url %>" alt="movie poster" class="movie-image">
            <div class="movie-info">
              <div class="title-wrapper">
                <h3><%= bookmark.movie.title %></h3>
              </div>
              <span class="rating"><%= bookmark.movie.rating %></span>
            </div>
            <div class="movie-comments">
              <i class="fas fa-quote-left"></i> <%= bookmark.comment %>
            </div>
            <div class="overview">
              <%= bookmark.movie.overview %>
            </div>
          </div> <!-- movie-card-->
        <% end %>
      </div> <!-- movie-list-->
    </div> <!-- movie col -->

    <div class="col-12 col-sm-12 col-md-3">
      <div class="reviews-container">
        <div class="reviews-form">
          <%= render 'reviews/form' %>
        </div>
        <%= turbo_frame_tag 'review_messages' do %>
          <div class="reviews-list">
            <% if @list.reviews.empty? %>
              <p>Be the first to review this list!</p>
            <% end %>
            <% @list.reviews.order(created_at: :desc).each do |review| %>
              <%= render 'reviews/review_message', review: review %>
            <% end %>
          </div>
        <% end %>
      </div>
    </div> <!-- review col -->
  </div> <!-- row -->






<%= javascript_pack_tag 'color_rating' %>
